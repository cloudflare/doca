{
  "id": "/softpro/orders",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "SoftPro Orders",
  "description": "Create and read orders through SafeWire",
  "type": "object",
  "definitions": {
    "identifier": {
      "type": "integer",
      "description": "The identifier of an order",
      "example": "xaleg34"
    }
  },
  "properties": {
    "order": {
      "$ref": "./order.json"
    },
    "party": {
      "$ref": "./profile.json"
    },
    "wire_instructions": {
      "type": "array",
      "items": {
        "$ref": "./wire_instruction.json"
      }
    }
  },
  "links": [
    {
      "title": "Add An Order",
      "description": "Add an order through SafeWire",
      "rel": "self",
      "href": "/softpro/orders",
      "method": "POST",
      "authentication_needed": true,
      "required": ["order", "party", "wire_instructions"],
      "schema": {
        "type": "object",
        "properties": {
          "order": {
            "$ref": "./order.json"
          },
          "party": {
            "$ref": "./profile.json"
          },
          "wire_instructions": {
            "$ref": "./wire_instruction.json"
          }
        }
      },
      "targetSchema": {
        "type": "object",
        "properties": {
          "order": {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "#/definitions/identifier"
              }
            }
          }
        }
      }
    },
    {
      "title": "Order Retrieve",
      "description": "Retrieve info for a specific order",
      "rel": "self",
      "href": "/v1/safewire/{#/definitions/identifier}?transaction_id=XXXX-XXX-XXXXXX-XXXXXXX",
      "method": "GET",
      "authentication_needed": "yes",
      "targetSchema": {
        "type": "object",
        "properties": {
          "order": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique order indentifier",
                "example": "asd123"
              },
              "notes": {
                "type": "object",
                "description": "Notes form the order",
                "properties": {
                  "activity_log": {
                    "type": "array",
                    "description": "Activity log for specific transaction",
                    "items": {
                      "properties": {
                        "agency_profile": {
                          "type": "object",
                          "description": "Agency profile (user that belongs to that agency) that's related to an activity",
                            "properties": {
                              "id": {
                                "type": "string",
                                "description": "Unique agency profile indentifier",
                                "example": "asd123"
                              },
                              "type": {
                                "type": "string",
                                "description": "Type of an object",
                                "example": "agency-profiles"
                              }
                            }
                         },
                        "datetime": {
                          "type": "date",
                          "description": "Date when the activity log happened",
                          "example": "YYYY-MM-DD"
                        },
                        "message": {
                          "type": "string",
                          "description": "Description of what happened in a friendly format",
                          "example": "SafeWire Verification Request delivered to Johny (Seller)"
                        },
                        "role": {
                          "type": "string",
                          "description": "Is party a buyer or seller",
                          "example": "Seller"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  ]
}
